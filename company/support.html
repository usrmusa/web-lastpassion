<!DOCTYPE html>
<html lang="en">
<!-- 
    NOTICE: All source code, design, and assets are the property of Musa Mgijima and Digilayn Studio.
    Unauthorized copying, reproduction, or use of this code is strictly prohibited.
    Copyright Â© 2024. All Rights Reserved.
-->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support & Story â€“ Last Passion</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="../favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="../favicon/favicon.svg" />
    <link rel="shortcut icon" href="../favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png" />
    <link rel="manifest" href="../favicon/site.webmanifest" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Bebas+Neue&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- External CSS -->
    <link rel="stylesheet" href="../styles.css">
    <style>
        .support-container {
            max-width: 1000px;
            margin: 40px auto;
            padding: 0 20px;
        }

        .support-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-top: 40px;
        }

        .story-section h2, .contact-section h2 {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: var(--on-surface);
        }

        .story-card, .contact-card {
            background: var(--surface);
            padding: 30px;
            border-radius: 12px;
            border: 1px solid var(--outline);
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        .story-content p {
            margin-bottom: 15px;
            color: var(--on-surface-variant);
            line-height: 1.8;
        }

        .info-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 20px;
            gap: 15px;
        }

        .info-item i {
            color: var(--primary);
            font-size: 1.2rem;
            margin-top: 3px;
        }

        .info-text h4 {
            font-weight: 700;
            margin-bottom: 5px;
            font-size: 14px;
            text-transform: uppercase;
        }

        .info-text p {
            color: var(--on-surface-variant);
            font-size: 15px;
        }

        .btn-whatsapp {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
            background: #25D366;
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 700;
            margin-top: 20px;
            transition: transform 0.3s;
        }

        .btn-whatsapp:hover {
            transform: translateY(-3px);
            background: #20ba5a;
        }

        .values-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 40px;
        }

        .value-card {
            text-align: center;
            padding: 20px;
            background: var(--surface-variant);
            border-radius: 10px;
        }

        .value-card h3 {
            font-family: 'Bebas Neue';
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--primary);
        }

        @media (max-width: 768px) {
            .support-grid {
                grid-template-columns: 1fr;
            }
            .values-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>

<!-- Global Loader -->
<div id="global-loader">
    <div class="spinner"></div>
</div>

<nav>
    <div class="logo-nav">
        <a href="../index.html"><img id="site-logo" src="../img/lastpassion.jpg" alt="Last Passion"></a>
    </div>

    <div class="menu-toggle" onclick="toggleMenu()">
        <i class="fa-solid fa-bars"></i>
    </div>

    <div class="nav-links" id="navLinks">
        <a href="../index.html">Home</a>
        <a href="../store/collections.html">Collections</a>
        <a href="support.html" class="active">Support</a>
        <div id="authLinks" style="display: flex; align-items: center;"></div>
    </div>

    <div class="cart-icon" onclick="toggleCart()">
        <i class="fa-solid fa-bag-shopping"></i>
        <span class="cart-count">0</span>
    </div>
</nav>

<div class="support-container">
    <div class="support-grid">
        <!-- Story Section -->
        <div class="story-section">
            <h2>Our Story</h2>
            <div class="story-card">
                <div class="story-content">
                    <p><strong>LAST PASSION</strong> is a 100% black-owned clothing company and CMT. Founded by <strong>Koketso Josia Matlhadisa</strong>, who started his journey in fashion at the age of 15.</p>
                    <p>Growing up in Poortjie, South of Johannesburg, Koketso dedicated himself to redefining the story of the streets through premium design and quality craftsmanship.</p>
                    <p>Today, Last Passion has access to a wide network of over 70 fabric stores and distributors, ensuring that we deliver excellence in every stitch, every time.</p>
                </div>
                
                <div style="margin-top: 30px; border-top: 1px solid var(--outline); padding-top: 20px;">
                    <h4 style="font-family: 'Bebas Neue'; font-size: 1.2rem; margin-bottom: 10px;">Our Mission</h4>
                    <p style="font-size: 14px; color: var(--on-surface-variant); font-style: italic;">"To rebrand and redefine a story that was built from the streets of Poortjie to the world."</p>
                </div>
            </div>
        </div>

        <!-- Contact Section -->
        <div class="contact-section">
            <h2>Get In Touch</h2>
            <div class="contact-card">
                <div class="info-item">
                    <i class="fa-solid fa-location-dot"></i>
                    <div class="info-text">
                        <h4>Location</h4>
                        <p>1794 South Street, Poortjie<br>Lenasia, 1841</p>
                    </div>
                </div>

                <div class="info-item">
                    <i class="fa-solid fa-envelope"></i>
                    <div class="info-text">
                        <h4>Email</h4>
                        <p>Lastpassionza@gmail.com</p>
                    </div>
                </div>

                <div class="info-item">
                    <i class="fa-solid fa-phone"></i>
                    <div class="info-text">
                        <h4>Phone</h4>
                        <p>+27 69 967 1746</p>
                    </div>
                </div>

                <div class="info-item">
                    <i class="fa-solid fa-clock"></i>
                    <div class="info-text">
                        <h4>Established</h4>
                        <p>10 April 2014</p>
                    </div>
                </div>

                <a href="https://wa.me/27699671746?text=Hello%20Last%20Passion!%20I%20need%20assistance%20with..." class="btn-whatsapp">
                    <i class="fa-brands fa-whatsapp"></i> Chat on WhatsApp
                </a>
            </div>
        </div>
    </div>

    <!-- Values -->
    <div class="values-grid">
        <div class="value-card">
            <h3>Honesty</h3>
            <p style="font-size: 13px; color: var(--on-surface-variant);">We are honest in all our dealings and treat all partners fairly.</p>
        </div>
        <div class="value-card">
            <h3>Integrity</h3>
            <p style="font-size: 13px; color: var(--on-surface-variant);">Integrity underpins our service and the manner in which we behave.</p>
        </div>
        <div class="value-card">
            <h3>Transparent</h3>
            <p style="font-size: 13px; color: var(--on-surface-variant);">We are transparent, as we don't believe in "fine print".</p>
        </div>
    </div>
</div>

<!-- Cart Sidebar -->
<div class="cart-sidebar" id="cartSidebar">
    <div class="cart-header">
        <h3>YOUR BAG</h3>
        <i class="fa-solid fa-xmark" style="cursor: pointer" onclick="toggleCart()"></i>
    </div>
    <div class="cart-items" id="cartItems"></div>
    <div class="cart-footer">
        <div class="total-row"><span>Total</span><span id="cartTotal">R 0.00</span></div>
        <button class="btn-checkout" onclick="openCheckout()">Checkout</button>
    </div>
</div>

<!-- Checkout Modal -->
<div class="modal" id="checkoutModal">
    <div class="modal-content">
        <h2 style="font-family: 'Bebas Neue'">Checkout</h2>
        <p style="margin-bottom: 20px; color: var(--on-surface-variant);">Complete your order details below.</p>
        <div class="form-group">
            <label>Full Name</label>
            <input type="text" id="custName" placeholder="Your name will appear here" readonly>
        </div>
        <div class="form-group">
            <label>Payment Method</label>
            <div style="background: var(--surface-variant); padding: 15px; border-radius: 8px; font-size: 14px; color: var(--on-surface-variant); border: 1px dashed var(--outline);">
                <p>ðŸ’¬ <strong>WhatsApp Manual Payment Link</strong></p>
                <p style="margin-top: 10px; font-size: 12px; opacity: 0.8;">ðŸ’³ Instant EFT & Card payments are coming soon!</p>
            </div>
        </div>
        <button class="btn-checkout" style="background: var(--success-green); color: white;" onclick="processOrder()">
            Place Order via WhatsApp
        </button>
        <button class="btn-checkout" style="background: var(--surface-variant); color: var(--on-surface-variant); margin-top: 10px;" onclick="closeCheckout()">Cancel</button>
    </div>
</div>

<footer>
    <p>&copy; 2024 Last Passion Clothing. All Rights Reserved.</p>
    <a href="https://digilayn.com" style="color: var(--brand-green); font-size: 10px; text-decoration: none; margin-top: 20px; display: block; font-weight: bold;">DIGILAYN STUDIO</a>
</footer>

<!-- Firebase SSOT -->
<script type="module">
  import { auth, db, COLLECTIONS } from '../core/FirebaseService.js';
  import { doc, getDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";
  import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";

  // Branding Loader
  async function loadSiteBranding() {
    try {
      const brandingDoc = await getDoc(doc(db, COLLECTIONS.PRODUCTS, 'main'));
      if (brandingDoc.exists()) {
        const data = brandingDoc.data();
        if (data.logoUrl) document.getElementById('site-logo').src = data.logoUrl;
      }
    } catch (e) {
      console.error("Error loading branding:", e);
    }
  }
  loadSiteBranding();

  const authLinks = document.getElementById('authLinks');
  onAuthStateChanged(auth, async (user) => {
    if (user) {
      let name = user.displayName || user.email.split('@')[0];
      authLinks.innerHTML = `<a href="../authentication/profile.html" class="nav-user-link">Hi, ${name}</a>`;
      
      // Speed optimization: Hide loader immediately
      document.getElementById('global-loader').classList.add('hidden');

      try {
        const userDoc = await getDoc(doc(db, COLLECTIONS.USERS, user.uid));
        if (userDoc.exists() && userDoc.data().displayName) {
          authLinks.innerHTML = `<a href="../authentication/profile.html" class="nav-user-link">Hi, ${userDoc.data().displayName}</a>`;
        }
      } catch (e) {}
    } else {
      authLinks.innerHTML = `<a href="../authentication/login.html?returnUrl=../company/support.html">Login</a>`;
      document.getElementById('global-loader').classList.add('hidden');
    }
  });

  window.auth = auth;
  window.db = db;
</script>

<script src="../script.js"></script>
</body>
</html>
